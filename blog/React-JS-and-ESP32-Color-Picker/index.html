<!DOCTYPE html> <html lang=en> <head> <meta charset=utf-8> <meta content="width=device-width,initial-scale=1" name=viewport> <meta content=#0b0b0b name=theme-color> <meta content="This is the website and blog for Kenny Collings who is a software, website, and front-end developer." name=description> <base href=/ > <link href=global.css rel=stylesheet> <link href=manifest.json rel=manifest crossorigin=use-credentials> <link href=favicon.png rel=icon type=image/png> <script>__SAPPER__={baseUrl:"",preloaded:[void 0,null,{post:{html:"\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002FCollingsKenny\u002FReact-JS-and-ESP32-Color-Picker\"\u003ESee the code\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Ch1 id=\"introduction\"\u003EIntroduction\u003C\u002Fh1\u003E\n\u003Cp\u003EThe ESP32 is a powerful little piece of hardware that has a wide array of uses and possibilities. One major feature of the ESP32 is its ability to add wireless connectivity to almost any electronics project.\u003C\u002Fp\u003E\n\u003Cp\u003EReact is another powerful tool. React is the industry standard for developing front end web applications. Using JavaScript, React provides a framework for developing reactive UIs.\u003C\u002Fp\u003E\n\u003Cp\u003EToday I will show you how to merge these two technologies, unlocking the ability to create large, fully featured web applications connected with your hardware projects. Together, we will create a web application that controls the color of the built in LED on the ESP32-S2.\u003C\u002Fp\u003E\n\u003Cp\u003ENote: The S2 version is not required to host a react application, it&#39;s just the one I am using and you may need to modify the IO pins to follow along with your board.\u003C\u002Fp\u003E\n\u003Ch1 id=\"what-you-need\"\u003EWhat you need\u003C\u002Fh1\u003E\n\u003Cul\u003E\n\u003Cli\u003EAn ESP32. I am using an ESP32-S2-DevKit available from Mouser for $8.\u003C\u002Fli\u003E\n\u003Cli\u003EArduino IDE\u003C\u002Fli\u003E\n\u003Cli\u003EVSCode with optional Arduino extension\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fme-no-dev\u002Farduino-esp32fs-plugin\"\u003EESP32 FS uploader\u003C\u002Fa\u003E\u003Cul\u003E\n\u003Cli\u003EIf using the S2, use \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fetherfi\u002Farduino-esp32fs-plugin-esp32s2\"\u003Ethis fork\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003EExternal Libraries:\u003Cul\u003E\n\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Fdocs.espressif.com\u002Fprojects\u002Farduino-esp32\u002Fen\u002Flatest\u002Finstalling.html\"\u003EESP32\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fme-no-dev\u002FESPAsyncWebServer\"\u003EESPAsyncWebServer\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fme-no-dev\u002FAsyncTCP\"\u003EAsyncTCP\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003EArduino Libraries:\u003Cul\u003E\n\u003Cli\u003EAdafruit NeoPixel\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003ENodeJS\u003C\u002Fli\u003E\n\u003Cli\u003EYarn\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003EFor the sake of concision, I will not be covering the installation of these tools.\u003C\u002Fp\u003E\n\u003Ch1 id=\"step-1---react-in-a-pack\"\u003EStep 1 - React in a Pack\u003C\u002Fh1\u003E\n\u003Cp\u003ESetting up the React application is, in my opinion, the most difficult piece and the key to this project. As React is simply a javascript framework there are many different ways to set up a project, and many of the most popular incarnations from the web development community are not appropriate for our use case.\u003C\u002Fp\u003E\n\u003Cp\u003EI will now ramble on about why we are doing this, if you don&#39;t care feel free to skip this section. In the web development world that React comes from, web applications are usually served and hosted on servers. These servers are typically in large datacenters and have access to unprecedented amounts of compute power. In this case, the device the user is connecting from is the weakest link, so much of react tooling is built with this perspective. Our perspective, however, is severely different. The device you are connecting from is incomprehensibly faster than the ESP32, and we need to make sure this is considered.\u003C\u002Fp\u003E\n\u003Cp\u003EOur desired outcome is to ensure that the ESP32 is doing the minimum possible work and we offload as much as possible to the &quot;user&#39;s&quot; device. We can configure the ESP32 to only serve the files and all the UI processing will happen in the user&#39;s browser. In addition, it is generally easier to work with data in Javascript as we don&#39;t have the constraints of C++ and embedded systems.\u003C\u002Fp\u003E\n\u003Ch3 id=\"i-react-boiler\"\u003EI. React Boiler\u003C\u002Fh3\u003E\n\u003Cp\u003EWe will bootstrap react with.... nothing! That&#39;s right we are going to create a custom react app and then bundle it together with webpack. This will allow us to use all the features of React and shove it all into a couple nice little files that we can serve from the ESP32.\u003C\u002Fp\u003E\n\u003Col\u003E\n\u003Cli\u003E Create a new folder. This will contain the whole project.\u003C\u002Fli\u003E\n\u003Cli\u003E Inside the new folder, create another new folder, called app. This will contain the React portion.\u003C\u002Fli\u003E\n\u003Cli\u003E cd into app\u002F. Run the command \u003Ccode\u003Eyarn init -y\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E \u003Ccode\u003Eyarn add react react-dom\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003ECreate two more directories, \u003Ccode\u003Esrc\u003C\u002Fcode\u003E, \u003Ccode\u003Epublic\u003C\u002Fcode\u003E.\u003Col\u003E\n\u003Cli\u003E In \u003Ccode\u003Esrc\u003C\u002Fcode\u003E create 2 files: \u003Ccode\u003Eindex.js\u003C\u002Fcode\u003E, \u003Ccode\u003EApp.js\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E In public create 2 files: \u003Ccode\u003Eindex.html\u003C\u002Fcode\u003E and an icon \u003Ccode\u003Efavicon.ico\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E Open the app folder in VSCode with \u003Ccode\u003Ecode .\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E Lets not populate these files with some basic React boilerplate:\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Cp\u003Eindex.js:\u003C\u002Fp\u003E\n\u003Cpre class=\"shiki\" style=\"background-color: #212121\"\u003E\u003Ccode\u003E\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #89DDFF\"\u003Eimport\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E React \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003Efrom\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C3E88D\"\u003Ereact\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #89DDFF\"\u003Eimport\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E ReactDOM \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003Efrom\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C3E88D\"\u003Ereact-dom\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #89DDFF\"\u003Eimport\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E App \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003Efrom\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C3E88D\"\u003E.\u002FApp\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #EEFFFF\"\u003EReactDOM\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #82AAFF\"\u003Erender\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #FFCB6B\"\u003EApp\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E \u002F&gt;,\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E document\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #82AAFF\"\u003EgetElementById\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C3E88D\"\u003Eroot\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E))\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EApp.js\u003C\u002Fp\u003E\n\u003Cpre class=\"shiki\" style=\"background-color: #212121\"\u003E\u003Ccode\u003E\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #89DDFF\"\u003Eimport\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E React \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003Efrom\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C3E88D\"\u003Ereact\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #89DDFF\"\u003Eexport\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003Edefault\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA\"\u003Efunction\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #82AAFF\"\u003EApp\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E()\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E{\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #F07178\"\u003E  \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003Ereturn\u003C\u002Fspan\u003E\u003Cspan style=\"color: #F07178\"\u003E (\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #F07178\"\u003E    \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #F07178\"\u003Ediv\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA\"\u003EclassName\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E=\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C3E88D\"\u003EApp\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E      \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #F07178\"\u003Eh1\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&gt;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003EHello World\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&lt;\u002F\u003C\u002Fspan\u003E\u003Cspan style=\"color: #F07178\"\u003Eh1\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E    \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&lt;\u002F\u003C\u002Fspan\u003E\u003Cspan style=\"color: #F07178\"\u003Ediv\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #F07178\"\u003E  )\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #89DDFF\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003Eindex.html\u003C\u002Fp\u003E\n\u003Cpre class=\"shiki\" style=\"background-color: #212121\"\u003E\u003Ccode\u003E\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&lt;!\u003C\u002Fspan\u003E\u003Cspan style=\"color: #F07178\"\u003EDOCTYPE\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA\"\u003Ehtml\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #F07178\"\u003Ehtml\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA\"\u003Elang\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E=\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C3E88D\"\u003Een\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E  \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #F07178\"\u003Ehead\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E    \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #F07178\"\u003Emeta\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA\"\u003Echarset\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E=\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C3E88D\"\u003Eutf-8\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E \u002F&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E    \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #F07178\"\u003Emeta\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #89DDFF\"\u003E      \u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA\"\u003Ename\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E=\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C3E88D\"\u003Eviewport\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&quot;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #89DDFF\"\u003E      \u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA\"\u003Econtent\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E=\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C3E88D\"\u003Ewidth=device-width, initial-scale=1, shrink-to-fit=no\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&quot;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #89DDFF\"\u003E    \u002F&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E    \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #F07178\"\u003Emeta\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA\"\u003Ename\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E=\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C3E88D\"\u003Etheme-color\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA\"\u003Econtent\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E=\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C3E88D\"\u003E#000000\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E \u002F&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E    \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #F07178\"\u003Elink\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA\"\u003Erel\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E=\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C3E88D\"\u003Eshortcut icon\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA\"\u003Ehref\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E=\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C3E88D\"\u003E%PUBLIC_URL%\u002Ffavicon.ico\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E \u002F&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E    \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #F07178\"\u003Etitle\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&gt;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003EESP32 React Server\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&lt;\u002F\u003C\u002Fspan\u003E\u003Cspan style=\"color: #F07178\"\u003Etitle\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E  \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&lt;\u002F\u003C\u002Fspan\u003E\u003Cspan style=\"color: #F07178\"\u003Ehead\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E  \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #F07178\"\u003Ebody\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E    \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #F07178\"\u003Enoscript\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&gt;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E You need to enable JavaScript to run this app. \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&lt;\u002F\u003C\u002Fspan\u003E\u003Cspan style=\"color: #F07178\"\u003Enoscript\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E    \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #F07178\"\u003Ediv\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA\"\u003Eid\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E=\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C3E88D\"\u003Eroot\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&gt;&lt;\u002F\u003C\u002Fspan\u003E\u003Cspan style=\"color: #F07178\"\u003Ediv\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E  \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&lt;\u002F\u003C\u002Fspan\u003E\u003Cspan style=\"color: #F07178\"\u003Ebody\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&lt;\u002F\u003C\u002Fspan\u003E\u003Cspan style=\"color: #F07178\"\u003Ehtml\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Ch3 id=\"ii-pack-your-bags\"\u003EII. Pack Your Bags\u003C\u002Fh3\u003E\n\u003Cp\u003ENow we have a react application, congrats! But it&#39;s pretty useless, we can&#39;t even run it to see what it looks like. Lame! It&#39;s okay, after this headache we should have a working dev environment.\u003C\u002Fp\u003E\n\u003Cp\u003EFor this, you&#39;re gonna wanna just copy my shit, webpack is kind of convoluted. If you&#39;re interested read the documentation.\u003C\u002Fp\u003E\n\u003Cp\u003EInstall the dependencies with \u003Ccode\u003Eyarn\u003C\u002Fcode\u003E\nRun the dev server with \u003Ccode\u003Eyarn start\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Ch3 id=\"iii-construction-commences\"\u003EIII. Construction Commences\u003C\u002Fh3\u003E\n\u003Col\u003E\n\u003Cli\u003E With webpack working we can install any packages we want! Lets install a color picker with \u003Ccode\u003Eyarn add @uiw\u002Freact-color-sketch\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E And we can add the new component to the react app.\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Cpre class=\"shiki\" style=\"background-color: #212121\"\u003E\u003Ccode\u003E\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #F07178\"\u003Ediv\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA\"\u003EclassName\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E=\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C3E88D\"\u003EcolorPicker\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E  \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&lt;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #FFCB6B\"\u003ESketch\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #89DDFF\"\u003E    \u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA\"\u003Ecolor\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E={\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003Ehex\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #89DDFF\"\u003E    \u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA\"\u003EonChange\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E={(\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003Ecolor\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E)\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA\"\u003E=&gt;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E{\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #F07178\"\u003E      \u003C\u002Fspan\u003E\u003Cspan style=\"color: #82AAFF\"\u003EsetHex\u003C\u002Fspan\u003E\u003Cspan style=\"color: #F07178\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003Ecolor\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003Ehex\u003C\u002Fspan\u003E\u003Cspan style=\"color: #F07178\"\u003E)\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #F07178\"\u003E    \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E}}\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #89DDFF\"\u003E  \u002F&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&lt;\u002F\u003C\u002Fspan\u003E\u003Cspan style=\"color: #F07178\"\u003Ediv\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&gt;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Col start=\"4\"\u003E\n\u003Cli\u003E Build the app like normal. We can add styles with \u003Ccode\u003Eimport &quot;.\u002Fstyles.css&quot;;\u003C\u002Fcode\u003E and even create separate component or utility files. All of this will get bundled at the end of the day.\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Ch3 id=\"iv-talking-with-others\"\u003EIV. Talking With Others\u003C\u002Fh3\u003E\n\u003Cp\u003EIt would be great if the web server could not only be hosted by the ESP32, but could also communicate and send commands!\nUsing the Fetch API, this is fairly straightforward.\u003C\u002Fp\u003E\n\u003Cpre class=\"shiki\" style=\"background-color: #212121\"\u003E\u003Ccode\u003E\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #89DDFF\"\u003Eexport\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA\"\u003Efunction\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #82AAFF\"\u003EpostLed\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003Ehex\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E)\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E{\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #F07178\"\u003E  \u003C\u002Fspan\u003E\u003Cspan style=\"color: #82AAFF\"\u003Efetch\u003C\u002Fspan\u003E\u003Cspan style=\"color: #F07178\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E`\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C3E88D\"\u003E\u002Fapi\u002Fled\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E`\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E,\u003C\u002Fspan\u003E\u003Cspan style=\"color: #F07178\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E{\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #F07178\"\u003E    method\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E:\u003C\u002Fspan\u003E\u003Cspan style=\"color: #F07178\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C3E88D\"\u003EPOST\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E,\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #F07178\"\u003E    body\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E:\u003C\u002Fspan\u003E\u003Cspan style=\"color: #F07178\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #82AAFF\"\u003EparseInt\u003C\u002Fspan\u003E\u003Cspan style=\"color: #F07178\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003Ehex\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #82AAFF\"\u003Esubstr\u003C\u002Fspan\u003E\u003Cspan style=\"color: #F07178\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: #F78C6C\"\u003E1\u003C\u002Fspan\u003E\u003Cspan style=\"color: #F07178\"\u003E)\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E,\u003C\u002Fspan\u003E\u003Cspan style=\"color: #F07178\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #F78C6C\"\u003E16\u003C\u002Fspan\u003E\u003Cspan style=\"color: #F07178\"\u003E)\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E,\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #F07178\"\u003E  \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E}\u003C\u002Fspan\u003E\u003Cspan style=\"color: #F07178\"\u003E)\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #89DDFF\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EHere, we keep the POST request as simple as possible (KISS) because processing the body on the ESP32 is not as easy.\u003C\u002Fp\u003E\n\u003Col\u003E\n\u003Cli\u003E \u003Ccode\u003E\u002Fapi\u002Fled\u003C\u002Fcode\u003E This will be the api path to implement on the ESP32.\u003C\u002Fli\u003E\n\u003Cli\u003E \u003Ccode\u003Emethod: &quot;POST&quot;\u003C\u002Fcode\u003E Since we are sending data we will use a POST request (see HTTP headers for more info).\u003C\u002Fli\u003E\n\u003Cli\u003E \u003Ccode\u003EparseInt(hex.substr(1), 16)\u003C\u002Fcode\u003E Just some fancy JS to clean up the hex value so that we have as little processing to do on the ESP32 as possible. (Remember the device the front-end is running on is lightyears quicker than the ESP32 is.)\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Ch3 id=\"v-build-the-bundle\"\u003EV. Build the Bundle\u003C\u002Fh3\u003E\n\u003Col\u003E\n\u003Cli\u003E Run \u003Ccode\u003Eyarn build\u003C\u002Fcode\u003E. Hopefully no errors pop up! ðŸ¤ž\u003C\u002Fli\u003E\n\u003Cli\u003EIn the \u003Ccode\u003Eapp\u002Fdist\u003C\u002Fcode\u003E folder you should see a couple files, these are the important ones:\u003Col\u003E\n\u003Cli\u003E \u003Ccode\u003Efavicon.ico\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E \u003Ccode\u003Eindex.html\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E \u003Ccode\u003Eindex.js\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Cp\u003EThat&#39;s it! That&#39;s the whole React app! You can actually open \u003Ccode\u003Eindex.html\u003C\u002Fcode\u003E in your browser and the app should work just like it did in the development environment. Now, on to the microcontroller!\u003C\u002Fp\u003E\n\u003Ch1 id=\"step-2---size-doesnt-matter\"\u003EStep 2 - Size Doesn&#39;t Matter\u003C\u002Fh1\u003E\n\u003Ch3 id=\"i-data-makes-the-world-go-round\"\u003EI. Data Makes the World Go Round\u003C\u002Fh3\u003E\n\u003Cp\u003ETo set up the arduino project, lets create another folder in the project folder.\u003C\u002Fp\u003E\n\u003Col\u003E\n\u003Cli\u003E In the project folder, create the folder \u003Ccode\u003Eappserver\u003C\u002Fcode\u003E,\u003C\u002Fli\u003E\n\u003Cli\u003E In this new folder create a file \u003Ccode\u003Eappserver.ino\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E Also in this new folder, create a folder \u003Ccode\u003Edata\u002F\u003C\u002Fcode\u003E.\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Cp\u003EA note on naming: \u003Cstrong\u003EThe folder MUST BE NAMED DATA !!\u003C\u002Fstrong\u003E The folder and the \u003Ccode\u003E.ino\u003C\u002Fcode\u003E file \u003Cem\u003Emust\u003C\u002Fem\u003E have the same names (but it can be whatever your heart desires ðŸ’—).\u003C\u002Fp\u003E\n\u003Col start=\"4\"\u003E\n\u003Cli\u003E Copy the important files from the \u003Ccode\u003Eapp\u002Fdist\u002F\u003C\u002Fcode\u003E folder into the \u003Ccode\u003Eappserver\u002Fdata\u002F\u003C\u002Fcode\u003E folder.\u003C\u002Fli\u003E\n\u003Cli\u003E In the Arduino IDE, open the \u003Ccode\u003Eappserver\u002F\u003C\u002Fcode\u003E folder.\u003C\u002Fli\u003E\n\u003Cli\u003E Connect your ESP32. Select \u003Cem\u003ETools\u003C\u002Fem\u003E &gt; \u003Cem\u003EEsp32 Sketch Data Uploader\u003C\u002Fem\u003E, and wait for the data to upload.\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Cp\u003EThe ESP32 Sketch Data Uploader or ESP32 FS Uploader, uploads all files in the sketch&#39;s data folder into the device&#39;s SPIFFS filesystem. Please note that sub-directories (e.x. \u003Ccode\u003E\u002Fdata\u002Fnewfolder\u002Fmyfile.txt\u003C\u002Fcode\u003E) are \u003Cstrong\u003ENOT\u003C\u002Fstrong\u003E supported (unless you are using LittleFS, which we, right now, unfortunately, are not using). If you have any questions please refer to the ESP32 SPIFFS and FS documentation (and let me know if you find any useful information because I found none).\u003C\u002Fp\u003E\n\u003Ch3 id=\"painters-paint-and-coders-sketch\"\u003EPainters Paint and Coders... Sketch?\u003C\u002Fh3\u003E\n\u003Cp\u003EFinally! We get to write code for the ESP32! All this time and not a single crumb of C++. Doesn&#39;t it feel good? The wind in your hair, the sun beaming down, and a nice cup of javascript to wash it all down. Well, you better put that cup of joe down, because it&#39;s time to get \u003Cem\u003Eserious\u003C\u002Fem\u003E (get it.. like C-erious... like C but it&#39;s.. you know what, nevermind).\u003C\u002Fp\u003E\n\u003Cp\u003EThis is another portion where it might be easier just to look at the full code, but I&#39;ll walk through some important parts and sections I found difficult.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cstrong\u003E\u003Cem\u003EWIFIY\u003C\u002Fem\u003E\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\n\u003Cpre class=\"shiki\" style=\"background-color: #212121\"\u003E\u003Ccode\u003E\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #EEFFFF\"\u003Econst char \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E*\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003Essid = \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C3E88D\"\u003EYourSSID\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #EEFFFF\"\u003Econst char \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E*\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003Epassword = \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C3E88D\"\u003EYour Password\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #EEFFFF\"\u003Econst bool apMode = false;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E...\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #FFCB6B\"\u003Evoid\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #82AAFF\"\u003Esetup\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E()\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #89DDFF\"\u003E{\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E    ...\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #89DDFF\"\u003E\u002F\u002F\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E ### Start WiFi\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E    if \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003EapMode\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E)\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E    \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E{\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E        ...\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E    }\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EPlease enter your network SSID and password up at the top if you want the web server to be available on your network. Otherwise, you can set \u003Ccode\u003EapMode = true\u003C\u002Fcode\u003E and the ESP32 will create its own wireless network and host the server there.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cstrong\u003E\u003Cem\u003ESPIFFY\u003C\u002Fem\u003E\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\n\u003Cpre class=\"shiki\" style=\"background-color: #212121\"\u003E\u003Ccode\u003E\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #89DDFF\"\u003E\u002F\u002F\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E ### Start SPIFFS\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #EEFFFF\"\u003Eif \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E(!\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003ESPIFFS\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #82AAFF\"\u003Ebegin\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003Etrue\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E))\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #89DDFF\"\u003E{\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E    Serial\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #82AAFF\"\u003Eprintln\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C3E88D\"\u003ESPIFFS Mount Failed\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E)\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E    return;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EThis is how I start SPIFFS, and it works for me. ðŸ¤·\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cstrong\u003E\u003Cem\u003EAsyncy\u003C\u002Fem\u003E\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\n\u003Cpre class=\"shiki\" style=\"background-color: #212121\"\u003E\u003Ccode\u003E\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #EEFFFF\"\u003EAsyncWebServer \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E*\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003Eserver;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #FFCB6B\"\u003Evoid\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #82AAFF\"\u003Esetup\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E()\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #89DDFF\"\u003E{\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E    \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E\u002F\u002F\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E ### Start Server\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E    server = new \u003C\u002Fspan\u003E\u003Cspan style=\"color: #82AAFF\"\u003EAsyncWebServer\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E80\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E)\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E    ...\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EMind the Async server boilerplate. (I did it a little weird because I pulled this code from custom library created for another project)\u003C\u002Fp\u003E\n\u003Cpre class=\"shiki\" style=\"background-color: #212121\"\u003E\u003Ccode\u003E\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #89DDFF\"\u003E\u002F\u002F\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E ### Server Routes\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #EEFFFF\"\u003Eserver\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E-&gt;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #82AAFF\"\u003Eon\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C3E88D\"\u003E\u002F\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E, HTTP_GET, \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E[](\u003C\u002Fspan\u003E\u003Cspan style=\"color: #FFCB6B\"\u003EAsyncWebServerRequest\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA\"\u003E*\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003Erequest\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E)\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E           \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E{\u003C\u002Fspan\u003E\u003Cspan style=\"color: #F07178\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003Erequest\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E-&gt;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #82AAFF\"\u003Esend\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: #F07178\"\u003ESPIFFS, \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C3E88D\"\u003E\u002Findex.html\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #F07178\"\u003E, \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C3E88D\"\u003Etext\u002Fhtml\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E)\u003C\u002Fspan\u003E\u003Cspan style=\"color: #F07178\"\u003E; \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E}\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E);\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #EEFFFF\"\u003Eserver\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E-&gt;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #82AAFF\"\u003Eon\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C3E88D\"\u003E\u002Findex.js\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E, HTTP_GET, \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E[](\u003C\u002Fspan\u003E\u003Cspan style=\"color: #FFCB6B\"\u003EAsyncWebServerRequest\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA\"\u003E*\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003Erequest\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E)\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E           \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E{\u003C\u002Fspan\u003E\u003Cspan style=\"color: #F07178\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003Erequest\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E-&gt;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #82AAFF\"\u003Esend\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: #F07178\"\u003ESPIFFS, \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C3E88D\"\u003E\u002Findex.js\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #F07178\"\u003E, \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C3E88D\"\u003Etext\u002Fjavascript\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E)\u003C\u002Fspan\u003E\u003Cspan style=\"color: #F07178\"\u003E; \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E}\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E);\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #EEFFFF\"\u003Eserver\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E-&gt;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #82AAFF\"\u003Eon\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C3E88D\"\u003E\u002Ffavicon.ico\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E, HTTP_GET, \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E[](\u003C\u002Fspan\u003E\u003Cspan style=\"color: #FFCB6B\"\u003EAsyncWebServerRequest\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA\"\u003E*\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003Erequest\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E)\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E           \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E{\u003C\u002Fspan\u003E\u003Cspan style=\"color: #F07178\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003Erequest\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E-&gt;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #82AAFF\"\u003Esend\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: #F07178\"\u003ESPIFFS, \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C3E88D\"\u003E\u002Ffavicon.ico\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #F07178\"\u003E, \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C3E88D\"\u003Eimage\u002Fx-icon\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E)\u003C\u002Fspan\u003E\u003Cspan style=\"color: #F07178\"\u003E; \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E}\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E);\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003ELets talk about these server routes. These three routes serve the files necessary for the React application to run. Only the smartest of readers will have noticed that these routes conspicuously correspond to the list of important files we purposely placed into the data folder.\u003C\u002Fp\u003E\n\u003Cpre class=\"shiki\" style=\"background-color: #212121\"\u003E\u003Ccode\u003E\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #89DDFF\"\u003E\u002F\u002F\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E ### API\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #EEFFFF\"\u003Eserver\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E-&gt;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #82AAFF\"\u003Eon\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E(\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E    \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C3E88D\"\u003E\u002Fapi\u002Fled\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E&quot;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E, HTTP_POST,\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E    \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E[](\u003C\u002Fspan\u003E\u003Cspan style=\"color: #FFCB6B\"\u003EAsyncWebServerRequest\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA\"\u003E*\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003Erequest\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E)\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E{}\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E,\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E    NULL,\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E    \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E[](\u003C\u002Fspan\u003E\u003Cspan style=\"color: #FFCB6B\"\u003EAsyncWebServerRequest\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA\"\u003E*\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003Erequest\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E,\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #FFCB6B\"\u003Euint8_t\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA\"\u003E*\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003Edata\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E,\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #FFCB6B\"\u003Esize_t\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E len\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E,\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #FFCB6B\"\u003Esize_t\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E index\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E,\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #FFCB6B\"\u003Esize_t\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E total\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E)\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E    \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E{\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E        char \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E*\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003Estr = \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003Echar \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E*)\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003Edata;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E        Serial\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #82AAFF\"\u003Eprintln\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: #82AAFF\"\u003Eatoi\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003Estr\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E))\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E        pixel\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #82AAFF\"\u003EsetPixelColor\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E0, pixel\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #82AAFF\"\u003Egamma32\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: #82AAFF\"\u003Eatoi\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003Estr\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E)))\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E        pixel\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #82AAFF\"\u003Eshow\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E()\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E        request\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E-&gt;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #82AAFF\"\u003Esend\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E200\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E)\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E    });\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003ENow, for the API route. This beast of boilerplate is super simple once the crap is removed.\u003C\u002Fp\u003E\n\u003Cpre class=\"shiki\" style=\"background-color: #212121\"\u003E\u003Ccode\u003E\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #EEFFFF\"\u003Echar \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E*\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003Estr = \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003Echar \u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E*)\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003Edata;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #EEFFFF\"\u003Epixel\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #82AAFF\"\u003EsetPixelColor\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E0, pixel\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #82AAFF\"\u003Egamma32\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: #82AAFF\"\u003Eatoi\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003Estr\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E)))\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #EEFFFF\"\u003Epixel\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #82AAFF\"\u003Eshow\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E()\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #EEFFFF\"\u003Erequest\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E-&gt;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #82AAFF\"\u003Esend\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E200\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E)\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EHere, extracted from the distractions, is the code that converts the message sent from the server into changing the pixel color. The \u003Ccode\u003Edata\u003C\u002Fcode\u003E variable points to an array of \u003Ccode\u003Euint8_t\u003C\u002Fcode\u003E values, i.e. the list of chars from the request body. In our case, since we processed everything out in javascript and sent the data over raw and ready to go, we simply cast a few times to convert the char array into the integer values the pixel library wants.\u003C\u002Fp\u003E\n\u003Cp\u003EFor the more complex, JSON processing is possible using a library called \u003Ca href=\"https:\u002F\u002Farduinojson.org\u002F\"\u003EArduinoJson\u003C\u002Fa\u003E, but that is a whole beast in itself.\u003C\u002Fp\u003E\n\u003Cpre class=\"shiki\" style=\"background-color: #212121\"\u003E\u003Ccode\u003E\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E...\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E    server\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E-&gt;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #82AAFF\"\u003Ebegin\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E()\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003ELast but not least, don&#39;t forget to start the server.\u003C\u002Fp\u003E\n\u003Cpre class=\"shiki\" style=\"background-color: #212121\"\u003E\u003Ccode\u003E\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #FFCB6B\"\u003Evoid\u003C\u002Fspan\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #82AAFF\"\u003Eloop\u003C\u002Fspan\u003E\u003Cspan style=\"color: #89DDFF\"\u003E()\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #89DDFF\"\u003E{\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"line\"\u003E\u003Cspan style=\"color: #EEFFFF\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cp\u003EAnd a blank Loop is required to get Arduino to compile. Nothing needs to happen in the loop since the server runs out of sync (asynchronously).\u003C\u002Fp\u003E\n\u003Ch1 id=\"step-3---its-showtime\"\u003EStep 3 - It&#39;s Showtime\u003C\u002Fh1\u003E\n\u003Cp\u003EThat&#39;s (hopefully) it! Build and upload the sketch, get the IP address from the Serial monitor, and type that bad boy into your browser of choice! You should (hopefully) now be looking at a fully functional React app hosted on a toaster, woops, I mean ESP32.\u003C\u002Fp\u003E\n",data:{slug:"React-JS-and-ESP32-Color-Picker",title:"Hosting a React.JS web application from an ESP 32 using Async server, webpack, and more",date:"2021-9-9",tags:"esp32, reactjs"},tags:["esp32","reactjs"]}}]};if('serviceWorker' in navigator)navigator.serviceWorker.register('/service-worker.js');var s=document.createElement("script");try{new Function("if(0)import('')")();s.src="/client/client.589b8652.js";s.type="module";s.crossOrigin="use-credentials";}catch(e){s.src="/client/shimport@2.0.4.js";s.setAttribute("data-main","/client/client.589b8652.js")}document.head.appendChild(s)</script> <link href=client/client-319fe15b.css rel=stylesheet><link href=client/_slug_-f8acd5e6.css rel=stylesheet> <title>Hosting a React.JS web application from an ESP 32 using Async server, webpack, and more - KennyC</title> <link href=https://fonts.gstatic.com rel=preconnect> <link href="https://fonts.googleapis.com/css2?family=PT+Sans+Caption&family=PT+Sans:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel=stylesheet> <link href=/client/client.589b8652.js rel=modulepreload as=script crossorigin=use-credentials><link href=/client/client-319fe15b.css rel=preload as=style><link href=/client/_slug_.77e2cb76.js rel=modulepreload as=script crossorigin=use-credentials><link href=/client/index.86605a4e.js rel=modulepreload as=script crossorigin=use-credentials><link href=/client/inject_styles.5607aec6.js rel=modulepreload as=script crossorigin=use-credentials><link href=/client/_slug_-f8acd5e6.css rel=preload as=style></head> <body id=sapper> <header class=svelte-14skbwm><div class="svelte-14skbwm header-container"><a href=. class="svelte-14skbwm logo">Kenny Collings</a> <nav class=svelte-14skbwm><a href=blog class=svelte-14skbwm aria-current=page rel=prefetch>Blog</a> <a href=about class=svelte-14skbwm>About </a></nav></div></header> <main class=svelte-arubvm><div class="svelte-arubvm container"> <h1>Hosting a React.JS web application from an ESP 32 using Async server, webpack, and more</h1> <p class="date svelte-10eub74"><em>Posted on September 9th, 2021</em></p> <div class=content><p><a href=https://github.com/CollingsKenny/React-JS-and-ESP32-Color-Picker>See the code</a></p> <h1 id=introduction>Introduction</h1> <p>The ESP32 is a powerful little piece of hardware that has a wide array of uses and possibilities. One major feature of the ESP32 is its ability to add wireless connectivity to almost any electronics project.</p> <p>React is another powerful tool. React is the industry standard for developing front end web applications. Using JavaScript, React provides a framework for developing reactive UIs.</p> <p>Today I will show you how to merge these two technologies, unlocking the ability to create large, fully featured web applications connected with your hardware projects. Together, we will create a web application that controls the color of the built in LED on the ESP32-S2.</p> <p>Note: The S2 version is not required to host a react application, it's just the one I am using and you may need to modify the IO pins to follow along with your board.</p> <h1 id=what-you-need>What you need</h1> <ul> <li>An ESP32. I am using an ESP32-S2-DevKit available from Mouser for $8.</li> <li>Arduino IDE</li> <li>VSCode with optional Arduino extension</li> <li><a href=https://github.com/me-no-dev/arduino-esp32fs-plugin>ESP32 FS uploader</a><ul> <li>If using the S2, use <a href=https://github.com/etherfi/arduino-esp32fs-plugin-esp32s2>this fork</a></li> </ul> </li> <li>External Libraries:<ul> <li><a href=https://docs.espressif.com/projects/arduino-esp32/en/latest/installing.html>ESP32</a></li> <li><a href=https://github.com/me-no-dev/ESPAsyncWebServer>ESPAsyncWebServer</a></li> <li><a href=https://github.com/me-no-dev/AsyncTCP>AsyncTCP</a></li> </ul> </li> <li>Arduino Libraries:<ul> <li>Adafruit NeoPixel</li> </ul> </li> <li>NodeJS</li> <li>Yarn</li> </ul> <p>For the sake of concision, I will not be covering the installation of these tools.</p> <h1 id=step-1---react-in-a-pack>Step 1 - React in a Pack</h1> <p>Setting up the React application is, in my opinion, the most difficult piece and the key to this project. As React is simply a javascript framework there are many different ways to set up a project, and many of the most popular incarnations from the web development community are not appropriate for our use case.</p> <p>I will now ramble on about why we are doing this, if you don't care feel free to skip this section. In the web development world that React comes from, web applications are usually served and hosted on servers. These servers are typically in large datacenters and have access to unprecedented amounts of compute power. In this case, the device the user is connecting from is the weakest link, so much of react tooling is built with this perspective. Our perspective, however, is severely different. The device you are connecting from is incomprehensibly faster than the ESP32, and we need to make sure this is considered.</p> <p>Our desired outcome is to ensure that the ESP32 is doing the minimum possible work and we offload as much as possible to the "user's" device. We can configure the ESP32 to only serve the files and all the UI processing will happen in the user's browser. In addition, it is generally easier to work with data in Javascript as we don't have the constraints of C++ and embedded systems.</p> <h3 id=i-react-boiler>I. React Boiler</h3> <p>We will bootstrap react with.... nothing! That's right we are going to create a custom react app and then bundle it together with webpack. This will allow us to use all the features of React and shove it all into a couple nice little files that we can serve from the ESP32.</p> <ol> <li> Create a new folder. This will contain the whole project.</li> <li> Inside the new folder, create another new folder, called app. This will contain the React portion.</li> <li> cd into app/. Run the command <code>yarn init -y</code></li> <li> <code>yarn add react react-dom</code></li> <li>Create two more directories, <code>src</code>, <code>public</code>.<ol> <li> In <code>src</code> create 2 files: <code>index.js</code>, <code>App.js</code></li> <li> In public create 2 files: <code>index.html</code> and an icon <code>favicon.ico</code></li> </ol> </li> <li> Open the app folder in VSCode with <code>code .</code></li> <li> Lets not populate these files with some basic React boilerplate:</li> </ol> <p>index.js:</p> <pre class=shiki style=background-color:#212121><code><span class=line><span style=color:#89ddff>import</span><span style=color:#eff> React </span><span style=color:#89ddff>from</span><span style=color:#eff> </span><span style=color:#89ddff>"</span><span style=color:#c3e88d>react</span><span style=color:#89ddff>"</span><span style=color:#89ddff>;</span></span>
<span class=line><span style=color:#89ddff>import</span><span style=color:#eff> ReactDOM </span><span style=color:#89ddff>from</span><span style=color:#eff> </span><span style=color:#89ddff>"</span><span style=color:#c3e88d>react-dom</span><span style=color:#89ddff>"</span><span style=color:#89ddff>;</span></span>

<span class=line><span style=color:#89ddff>import</span><span style=color:#eff> App </span><span style=color:#89ddff>from</span><span style=color:#eff> </span><span style=color:#89ddff>"</span><span style=color:#c3e88d>./App</span><span style=color:#89ddff>"</span><span style=color:#89ddff>;</span></span>

<span class=line><span style=color:#eff>ReactDOM</span><span style=color:#89ddff>.</span><span style=color:#82aaff>render</span><span style=color:#eff>(</span><span style=color:#89ddff>&lt;</span><span style=color:#ffcb6b>App</span><span style=color:#89ddff> />,</span><span style=color:#eff> document</span><span style=color:#89ddff>.</span><span style=color:#82aaff>getElementById</span><span style=color:#eff>(</span><span style=color:#89ddff>"</span><span style=color:#c3e88d>root</span><span style=color:#89ddff>"</span><span style=color:#eff>))</span><span style=color:#89ddff>;</span></span></code></pre><p>App.js</p> <pre class=shiki style=background-color:#212121><code><span class=line><span style=color:#89ddff>import</span><span style=color:#eff> React </span><span style=color:#89ddff>from</span><span style=color:#eff> </span><span style=color:#89ddff>"</span><span style=color:#c3e88d>react</span><span style=color:#89ddff>"</span><span style=color:#89ddff>;</span></span>

<span class=line><span style=color:#89ddff>export</span><span style=color:#eff> </span><span style=color:#89ddff>default</span><span style=color:#eff> </span><span style=color:#c792ea>function</span><span style=color:#eff> </span><span style=color:#82aaff>App</span><span style=color:#89ddff>()</span><span style=color:#eff> </span><span style=color:#89ddff>{</span></span>
<span class=line><span style=color:#f07178>  </span><span style=color:#89ddff>return</span><span style=color:#f07178> (</span></span>
<span class=line><span style=color:#f07178>    </span><span style=color:#89ddff>&lt;</span><span style=color:#f07178>div</span><span style=color:#89ddff> </span><span style=color:#c792ea>className</span><span style=color:#89ddff>=</span><span style=color:#89ddff>"</span><span style=color:#c3e88d>App</span><span style=color:#89ddff>"</span><span style=color:#89ddff>></span></span>
<span class=line><span style=color:#eff>      </span><span style=color:#89ddff>&lt;</span><span style=color:#f07178>h1</span><span style=color:#89ddff>></span><span style=color:#eff>Hello World</span><span style=color:#89ddff>&lt;/</span><span style=color:#f07178>h1</span><span style=color:#89ddff>></span></span>
<span class=line><span style=color:#eff>    </span><span style=color:#89ddff>&lt;/</span><span style=color:#f07178>div</span><span style=color:#89ddff>></span></span>
<span class=line><span style=color:#f07178>  )</span><span style=color:#89ddff>;</span></span>
<span class=line><span style=color:#89ddff>}</span></span></code></pre><p>index.html</p> <pre class=shiki style=background-color:#212121><code><span class=line><span style=color:#89ddff>&lt;!</span><span style=color:#f07178>DOCTYPE</span><span style=color:#89ddff> </span><span style=color:#c792ea>html</span><span style=color:#89ddff>></span></span>
<span class=line><span style=color:#89ddff>&lt;</span><span style=color:#f07178>html</span><span style=color:#89ddff> </span><span style=color:#c792ea>lang</span><span style=color:#89ddff>=</span><span style=color:#89ddff>"</span><span style=color:#c3e88d>en</span><span style=color:#89ddff>"</span><span style=color:#89ddff>></span></span>
<span class=line><span style=color:#eff>  </span><span style=color:#89ddff>&lt;</span><span style=color:#f07178>head</span><span style=color:#89ddff>></span></span>
<span class=line><span style=color:#eff>    </span><span style=color:#89ddff>&lt;</span><span style=color:#f07178>meta</span><span style=color:#89ddff> </span><span style=color:#c792ea>charset</span><span style=color:#89ddff>=</span><span style=color:#89ddff>"</span><span style=color:#c3e88d>utf-8</span><span style=color:#89ddff>"</span><span style=color:#89ddff> /></span></span>
<span class=line><span style=color:#eff>    </span><span style=color:#89ddff>&lt;</span><span style=color:#f07178>meta</span></span>
<span class=line><span style=color:#89ddff>      </span><span style=color:#c792ea>name</span><span style=color:#89ddff>=</span><span style=color:#89ddff>"</span><span style=color:#c3e88d>viewport</span><span style=color:#89ddff>"</span></span>
<span class=line><span style=color:#89ddff>      </span><span style=color:#c792ea>content</span><span style=color:#89ddff>=</span><span style=color:#89ddff>"</span><span style=color:#c3e88d>width=device-width, initial-scale=1, shrink-to-fit=no</span><span style=color:#89ddff>"</span></span>
<span class=line><span style=color:#89ddff>    /></span></span>
<span class=line><span style=color:#eff>    </span><span style=color:#89ddff>&lt;</span><span style=color:#f07178>meta</span><span style=color:#89ddff> </span><span style=color:#c792ea>name</span><span style=color:#89ddff>=</span><span style=color:#89ddff>"</span><span style=color:#c3e88d>theme-color</span><span style=color:#89ddff>"</span><span style=color:#89ddff> </span><span style=color:#c792ea>content</span><span style=color:#89ddff>=</span><span style=color:#89ddff>"</span><span style=color:#c3e88d>#000000</span><span style=color:#89ddff>"</span><span style=color:#89ddff> /></span></span>

<span class=line><span style=color:#eff>    </span><span style=color:#89ddff>&lt;</span><span style=color:#f07178>link</span><span style=color:#89ddff> </span><span style=color:#c792ea>rel</span><span style=color:#89ddff>=</span><span style=color:#89ddff>"</span><span style=color:#c3e88d>shortcut icon</span><span style=color:#89ddff>"</span><span style=color:#89ddff> </span><span style=color:#c792ea>href</span><span style=color:#89ddff>=</span><span style=color:#89ddff>"</span><span style=color:#c3e88d>%PUBLIC_URL%/favicon.ico</span><span style=color:#89ddff>"</span><span style=color:#89ddff> /></span></span>

<span class=line><span style=color:#eff>    </span><span style=color:#89ddff>&lt;</span><span style=color:#f07178>title</span><span style=color:#89ddff>></span><span style=color:#eff>ESP32 React Server</span><span style=color:#89ddff>&lt;/</span><span style=color:#f07178>title</span><span style=color:#89ddff>></span></span>
<span class=line><span style=color:#eff>  </span><span style=color:#89ddff>&lt;/</span><span style=color:#f07178>head</span><span style=color:#89ddff>></span></span>

<span class=line><span style=color:#eff>  </span><span style=color:#89ddff>&lt;</span><span style=color:#f07178>body</span><span style=color:#89ddff>></span></span>
<span class=line><span style=color:#eff>    </span><span style=color:#89ddff>&lt;</span><span style=color:#f07178>noscript</span><span style=color:#89ddff>></span><span style=color:#eff> You need to enable JavaScript to run this app. </span><span style=color:#89ddff>&lt;/</span><span style=color:#f07178>noscript</span><span style=color:#89ddff>></span></span>
<span class=line><span style=color:#eff>    </span><span style=color:#89ddff>&lt;</span><span style=color:#f07178>div</span><span style=color:#89ddff> </span><span style=color:#c792ea>id</span><span style=color:#89ddff>=</span><span style=color:#89ddff>"</span><span style=color:#c3e88d>root</span><span style=color:#89ddff>"</span><span style=color:#89ddff>>&lt;/</span><span style=color:#f07178>div</span><span style=color:#89ddff>></span></span>
<span class=line><span style=color:#eff>  </span><span style=color:#89ddff>&lt;/</span><span style=color:#f07178>body</span><span style=color:#89ddff>></span></span>
<span class=line><span style=color:#89ddff>&lt;/</span><span style=color:#f07178>html</span><span style=color:#89ddff>></span></span></code></pre><h3 id=ii-pack-your-bags>II. Pack Your Bags</h3> <p>Now we have a react application, congrats! But it's pretty useless, we can't even run it to see what it looks like. Lame! It's okay, after this headache we should have a working dev environment.</p> <p>For this, you're gonna wanna just copy my shit, webpack is kind of convoluted. If you're interested read the documentation.</p> <p>Install the dependencies with <code>yarn</code> Run the dev server with <code>yarn start</code></p> <h3 id=iii-construction-commences>III. Construction Commences</h3> <ol> <li> With webpack working we can install any packages we want! Lets install a color picker with <code>yarn add @uiw/react-color-sketch</code></li> <li> And we can add the new component to the react app.</li> </ol> <pre class=shiki style=background-color:#212121><code><span class=line><span style=color:#89ddff>&lt;</span><span style=color:#f07178>div</span><span style=color:#89ddff> </span><span style=color:#c792ea>className</span><span style=color:#89ddff>=</span><span style=color:#89ddff>"</span><span style=color:#c3e88d>colorPicker</span><span style=color:#89ddff>"</span><span style=color:#89ddff>></span></span>
<span class=line><span style=color:#eff>  </span><span style=color:#89ddff>&lt;</span><span style=color:#ffcb6b>Sketch</span></span>
<span class=line><span style=color:#89ddff>    </span><span style=color:#c792ea>color</span><span style=color:#89ddff>={</span><span style=color:#eff>hex</span><span style=color:#89ddff>}</span></span>
<span class=line><span style=color:#89ddff>    </span><span style=color:#c792ea>onChange</span><span style=color:#89ddff>={(</span><span style=color:#eff>color</span><span style=color:#89ddff>)</span><span style=color:#eff> </span><span style=color:#c792ea>=></span><span style=color:#eff> </span><span style=color:#89ddff>{</span></span>
<span class=line><span style=color:#f07178>      </span><span style=color:#82aaff>setHex</span><span style=color:#f07178>(</span><span style=color:#eff>color</span><span style=color:#89ddff>.</span><span style=color:#eff>hex</span><span style=color:#f07178>)</span><span style=color:#89ddff>;</span></span>
<span class=line><span style=color:#f07178>    </span><span style=color:#89ddff>}}</span></span>
<span class=line><span style=color:#89ddff>  /></span></span>
<span class=line><span style=color:#89ddff>&lt;/</span><span style=color:#f07178>div</span><span style=color:#89ddff>></span></span></code></pre><ol start=4> <li> Build the app like normal. We can add styles with <code>import "./styles.css";</code> and even create separate component or utility files. All of this will get bundled at the end of the day.</li> </ol> <h3 id=iv-talking-with-others>IV. Talking With Others</h3> <p>It would be great if the web server could not only be hosted by the ESP32, but could also communicate and send commands! Using the Fetch API, this is fairly straightforward.</p> <pre class=shiki style=background-color:#212121><code><span class=line><span style=color:#89ddff>export</span><span style=color:#eff> </span><span style=color:#c792ea>function</span><span style=color:#eff> </span><span style=color:#82aaff>postLed</span><span style=color:#89ddff>(</span><span style=color:#eff>hex</span><span style=color:#89ddff>)</span><span style=color:#eff> </span><span style=color:#89ddff>{</span></span>
<span class=line><span style=color:#f07178>  </span><span style=color:#82aaff>fetch</span><span style=color:#f07178>(</span><span style=color:#89ddff>`</span><span style=color:#c3e88d>/api/led</span><span style=color:#89ddff>`</span><span style=color:#89ddff>,</span><span style=color:#f07178> </span><span style=color:#89ddff>{</span></span>
<span class=line><span style=color:#f07178>    method</span><span style=color:#89ddff>:</span><span style=color:#f07178> </span><span style=color:#89ddff>"</span><span style=color:#c3e88d>POST</span><span style=color:#89ddff>"</span><span style=color:#89ddff>,</span></span>
<span class=line><span style=color:#f07178>    body</span><span style=color:#89ddff>:</span><span style=color:#f07178> </span><span style=color:#82aaff>parseInt</span><span style=color:#f07178>(</span><span style=color:#eff>hex</span><span style=color:#89ddff>.</span><span style=color:#82aaff>substr</span><span style=color:#f07178>(</span><span style=color:#f78c6c>1</span><span style=color:#f07178>)</span><span style=color:#89ddff>,</span><span style=color:#f07178> </span><span style=color:#f78c6c>16</span><span style=color:#f07178>)</span><span style=color:#89ddff>,</span></span>
<span class=line><span style=color:#f07178>  </span><span style=color:#89ddff>}</span><span style=color:#f07178>)</span><span style=color:#89ddff>;</span></span>
<span class=line><span style=color:#89ddff>}</span></span></code></pre><p>Here, we keep the POST request as simple as possible (KISS) because processing the body on the ESP32 is not as easy.</p> <ol> <li> <code>/api/led</code> This will be the api path to implement on the ESP32.</li> <li> <code>method: "POST"</code> Since we are sending data we will use a POST request (see HTTP headers for more info).</li> <li> <code>parseInt(hex.substr(1), 16)</code> Just some fancy JS to clean up the hex value so that we have as little processing to do on the ESP32 as possible. (Remember the device the front-end is running on is lightyears quicker than the ESP32 is.)</li> </ol> <h3 id=v-build-the-bundle>V. Build the Bundle</h3> <ol> <li> Run <code>yarn build</code>. Hopefully no errors pop up! ðŸ¤ž</li> <li>In the <code>app/dist</code> folder you should see a couple files, these are the important ones:<ol> <li> <code>favicon.ico</code></li> <li> <code>index.html</code></li> <li> <code>index.js</code></li> </ol> </li> </ol> <p>That's it! That's the whole React app! You can actually open <code>index.html</code> in your browser and the app should work just like it did in the development environment. Now, on to the microcontroller!</p> <h1 id=step-2---size-doesnt-matter>Step 2 - Size Doesn't Matter</h1> <h3 id=i-data-makes-the-world-go-round>I. Data Makes the World Go Round</h3> <p>To set up the arduino project, lets create another folder in the project folder.</p> <ol> <li> In the project folder, create the folder <code>appserver</code>,</li> <li> In this new folder create a file <code>appserver.ino</code></li> <li> Also in this new folder, create a folder <code>data/</code>.</li> </ol> <p>A note on naming: <strong>The folder MUST BE NAMED DATA !!</strong> The folder and the <code>.ino</code> file <em>must</em> have the same names (but it can be whatever your heart desires ðŸ’—).</p> <ol start=4> <li> Copy the important files from the <code>app/dist/</code> folder into the <code>appserver/data/</code> folder.</li> <li> In the Arduino IDE, open the <code>appserver/</code> folder.</li> <li> Connect your ESP32. Select <em>Tools</em> > <em>Esp32 Sketch Data Uploader</em>, and wait for the data to upload.</li> </ol> <p>The ESP32 Sketch Data Uploader or ESP32 FS Uploader, uploads all files in the sketch's data folder into the device's SPIFFS filesystem. Please note that sub-directories (e.x. <code>/data/newfolder/myfile.txt</code>) are <strong>NOT</strong> supported (unless you are using LittleFS, which we, right now, unfortunately, are not using). If you have any questions please refer to the ESP32 SPIFFS and FS documentation (and let me know if you find any useful information because I found none).</p> <h3 id=painters-paint-and-coders-sketch>Painters Paint and Coders... Sketch?</h3> <p>Finally! We get to write code for the ESP32! All this time and not a single crumb of C++. Doesn't it feel good? The wind in your hair, the sun beaming down, and a nice cup of javascript to wash it all down. Well, you better put that cup of joe down, because it's time to get <em>serious</em> (get it.. like C-erious... like C but it's.. you know what, nevermind).</p> <p>This is another portion where it might be easier just to look at the full code, but I'll walk through some important parts and sections I found difficult.</p> <p><strong><em>WIFIY</em></strong></p> <pre class=shiki style=background-color:#212121><code><span class=line><span style=color:#eff>const char </span><span style=color:#89ddff>*</span><span style=color:#eff>ssid = </span><span style=color:#89ddff>"</span><span style=color:#c3e88d>YourSSID</span><span style=color:#89ddff>"</span><span style=color:#eff>;</span></span>
<span class=line><span style=color:#eff>const char </span><span style=color:#89ddff>*</span><span style=color:#eff>password = </span><span style=color:#89ddff>"</span><span style=color:#c3e88d>Your Password</span><span style=color:#89ddff>"</span><span style=color:#eff>;</span></span>
<span class=line><span style=color:#eff>const bool apMode = false;</span></span>

<span class=line><span style=color:#eff>...</span></span>
<span class=line><span style=color:#ffcb6b>void</span><span style=color:#eff> </span><span style=color:#82aaff>setup</span><span style=color:#89ddff>()</span></span>
<span class=line><span style=color:#89ddff>{</span></span>
<span class=line><span style=color:#eff>    ...</span></span>

<span class=line><span style=color:#89ddff>//</span><span style=color:#eff> ### Start WiFi</span></span>
<span class=line><span style=color:#eff>    if </span><span style=color:#89ddff>(</span><span style=color:#eff>apMode</span><span style=color:#89ddff>)</span></span>
<span class=line><span style=color:#eff>    </span><span style=color:#89ddff>{</span></span>
<span class=line><span style=color:#eff>        ...</span></span>
<span class=line><span style=color:#eff>    }</span></span>
<span class=line><span style=color:#eff>}</span></span></code></pre><p>Please enter your network SSID and password up at the top if you want the web server to be available on your network. Otherwise, you can set <code>apMode = true</code> and the ESP32 will create its own wireless network and host the server there.</p> <p><strong><em>SPIFFY</em></strong></p> <pre class=shiki style=background-color:#212121><code><span class=line><span style=color:#89ddff>//</span><span style=color:#eff> ### Start SPIFFS</span></span>
<span class=line><span style=color:#eff>if </span><span style=color:#89ddff>(!</span><span style=color:#eff>SPIFFS</span><span style=color:#89ddff>.</span><span style=color:#82aaff>begin</span><span style=color:#89ddff>(</span><span style=color:#eff>true</span><span style=color:#89ddff>))</span></span>
<span class=line><span style=color:#89ddff>{</span></span>
<span class=line><span style=color:#eff>    Serial</span><span style=color:#89ddff>.</span><span style=color:#82aaff>println</span><span style=color:#89ddff>(</span><span style=color:#89ddff>"</span><span style=color:#c3e88d>SPIFFS Mount Failed</span><span style=color:#89ddff>"</span><span style=color:#89ddff>)</span><span style=color:#eff>;</span></span>
<span class=line><span style=color:#eff>    return;</span></span>
<span class=line><span style=color:#eff>}</span></span></code></pre><p>This is how I start SPIFFS, and it works for me. ðŸ¤·</p> <p><strong><em>Asyncy</em></strong></p> <pre class=shiki style=background-color:#212121><code><span class=line><span style=color:#eff>AsyncWebServer </span><span style=color:#89ddff>*</span><span style=color:#eff>server;</span></span>

<span class=line><span style=color:#ffcb6b>void</span><span style=color:#eff> </span><span style=color:#82aaff>setup</span><span style=color:#89ddff>()</span></span>
<span class=line><span style=color:#89ddff>{</span></span>
<span class=line><span style=color:#eff>    </span><span style=color:#89ddff>//</span><span style=color:#eff> ### Start Server</span></span>
<span class=line><span style=color:#eff>    server = new </span><span style=color:#82aaff>AsyncWebServer</span><span style=color:#89ddff>(</span><span style=color:#eff>80</span><span style=color:#89ddff>)</span><span style=color:#eff>;</span></span>
<span class=line><span style=color:#eff>    ...</span></span></code></pre><p>Mind the Async server boilerplate. (I did it a little weird because I pulled this code from custom library created for another project)</p> <pre class=shiki style=background-color:#212121><code><span class=line><span style=color:#89ddff>//</span><span style=color:#eff> ### Server Routes</span></span>
<span class=line><span style=color:#eff>server</span><span style=color:#89ddff>-></span><span style=color:#82aaff>on</span><span style=color:#89ddff>(</span><span style=color:#89ddff>"</span><span style=color:#c3e88d>/</span><span style=color:#89ddff>"</span><span style=color:#eff>, HTTP_GET, </span><span style=color:#89ddff>[](</span><span style=color:#ffcb6b>AsyncWebServerRequest</span><span style=color:#eff> </span><span style=color:#c792ea>*</span><span style=color:#eff>request</span><span style=color:#89ddff>)</span></span>
<span class=line><span style=color:#eff>           </span><span style=color:#89ddff>{</span><span style=color:#f07178> </span><span style=color:#eff>request</span><span style=color:#89ddff>-></span><span style=color:#82aaff>send</span><span style=color:#89ddff>(</span><span style=color:#f07178>SPIFFS, </span><span style=color:#89ddff>"</span><span style=color:#c3e88d>/index.html</span><span style=color:#89ddff>"</span><span style=color:#f07178>, </span><span style=color:#89ddff>"</span><span style=color:#c3e88d>text/html</span><span style=color:#89ddff>"</span><span style=color:#89ddff>)</span><span style=color:#f07178>; </span><span style=color:#89ddff>}</span><span style=color:#eff>);</span></span>

<span class=line><span style=color:#eff>server</span><span style=color:#89ddff>-></span><span style=color:#82aaff>on</span><span style=color:#89ddff>(</span><span style=color:#89ddff>"</span><span style=color:#c3e88d>/index.js</span><span style=color:#89ddff>"</span><span style=color:#eff>, HTTP_GET, </span><span style=color:#89ddff>[](</span><span style=color:#ffcb6b>AsyncWebServerRequest</span><span style=color:#eff> </span><span style=color:#c792ea>*</span><span style=color:#eff>request</span><span style=color:#89ddff>)</span></span>
<span class=line><span style=color:#eff>           </span><span style=color:#89ddff>{</span><span style=color:#f07178> </span><span style=color:#eff>request</span><span style=color:#89ddff>-></span><span style=color:#82aaff>send</span><span style=color:#89ddff>(</span><span style=color:#f07178>SPIFFS, </span><span style=color:#89ddff>"</span><span style=color:#c3e88d>/index.js</span><span style=color:#89ddff>"</span><span style=color:#f07178>, </span><span style=color:#89ddff>"</span><span style=color:#c3e88d>text/javascript</span><span style=color:#89ddff>"</span><span style=color:#89ddff>)</span><span style=color:#f07178>; </span><span style=color:#89ddff>}</span><span style=color:#eff>);</span></span>

<span class=line><span style=color:#eff>server</span><span style=color:#89ddff>-></span><span style=color:#82aaff>on</span><span style=color:#89ddff>(</span><span style=color:#89ddff>"</span><span style=color:#c3e88d>/favicon.ico</span><span style=color:#89ddff>"</span><span style=color:#eff>, HTTP_GET, </span><span style=color:#89ddff>[](</span><span style=color:#ffcb6b>AsyncWebServerRequest</span><span style=color:#eff> </span><span style=color:#c792ea>*</span><span style=color:#eff>request</span><span style=color:#89ddff>)</span></span>
<span class=line><span style=color:#eff>           </span><span style=color:#89ddff>{</span><span style=color:#f07178> </span><span style=color:#eff>request</span><span style=color:#89ddff>-></span><span style=color:#82aaff>send</span><span style=color:#89ddff>(</span><span style=color:#f07178>SPIFFS, </span><span style=color:#89ddff>"</span><span style=color:#c3e88d>/favicon.ico</span><span style=color:#89ddff>"</span><span style=color:#f07178>, </span><span style=color:#89ddff>"</span><span style=color:#c3e88d>image/x-icon</span><span style=color:#89ddff>"</span><span style=color:#89ddff>)</span><span style=color:#f07178>; </span><span style=color:#89ddff>}</span><span style=color:#eff>);</span></span></code></pre><p>Lets talk about these server routes. These three routes serve the files necessary for the React application to run. Only the smartest of readers will have noticed that these routes conspicuously correspond to the list of important files we purposely placed into the data folder.</p> <pre class=shiki style=background-color:#212121><code><span class=line><span style=color:#89ddff>//</span><span style=color:#eff> ### API</span></span>
<span class=line><span style=color:#eff>server</span><span style=color:#89ddff>-></span><span style=color:#82aaff>on</span><span style=color:#89ddff>(</span></span>
<span class=line><span style=color:#eff>    </span><span style=color:#89ddff>"</span><span style=color:#c3e88d>/api/led</span><span style=color:#89ddff>"</span><span style=color:#eff>, HTTP_POST,</span></span>
<span class=line><span style=color:#eff>    </span><span style=color:#89ddff>[](</span><span style=color:#ffcb6b>AsyncWebServerRequest</span><span style=color:#eff> </span><span style=color:#c792ea>*</span><span style=color:#eff>request</span><span style=color:#89ddff>)</span><span style=color:#eff> </span><span style=color:#89ddff>{}</span><span style=color:#eff>,</span></span>
<span class=line><span style=color:#eff>    NULL,</span></span>
<span class=line><span style=color:#eff>    </span><span style=color:#89ddff>[](</span><span style=color:#ffcb6b>AsyncWebServerRequest</span><span style=color:#eff> </span><span style=color:#c792ea>*</span><span style=color:#eff>request</span><span style=color:#89ddff>,</span><span style=color:#eff> </span><span style=color:#ffcb6b>uint8_t</span><span style=color:#eff> </span><span style=color:#c792ea>*</span><span style=color:#eff>data</span><span style=color:#89ddff>,</span><span style=color:#eff> </span><span style=color:#ffcb6b>size_t</span><span style=color:#eff> len</span><span style=color:#89ddff>,</span><span style=color:#eff> </span><span style=color:#ffcb6b>size_t</span><span style=color:#eff> index</span><span style=color:#89ddff>,</span><span style=color:#eff> </span><span style=color:#ffcb6b>size_t</span><span style=color:#eff> total</span><span style=color:#89ddff>)</span></span>
<span class=line><span style=color:#eff>    </span><span style=color:#89ddff>{</span></span>
<span class=line><span style=color:#eff>        char </span><span style=color:#89ddff>*</span><span style=color:#eff>str = </span><span style=color:#89ddff>(</span><span style=color:#eff>char </span><span style=color:#89ddff>*)</span><span style=color:#eff>data;</span></span>
<span class=line><span style=color:#eff>        Serial</span><span style=color:#89ddff>.</span><span style=color:#82aaff>println</span><span style=color:#89ddff>(</span><span style=color:#82aaff>atoi</span><span style=color:#89ddff>(</span><span style=color:#eff>str</span><span style=color:#89ddff>))</span><span style=color:#eff>;</span></span>
<span class=line><span style=color:#eff>        pixel</span><span style=color:#89ddff>.</span><span style=color:#82aaff>setPixelColor</span><span style=color:#89ddff>(</span><span style=color:#eff>0, pixel</span><span style=color:#89ddff>.</span><span style=color:#82aaff>gamma32</span><span style=color:#89ddff>(</span><span style=color:#82aaff>atoi</span><span style=color:#89ddff>(</span><span style=color:#eff>str</span><span style=color:#89ddff>)))</span><span style=color:#eff>;</span></span>
<span class=line><span style=color:#eff>        pixel</span><span style=color:#89ddff>.</span><span style=color:#82aaff>show</span><span style=color:#89ddff>()</span><span style=color:#eff>;</span></span>

<span class=line><span style=color:#eff>        request</span><span style=color:#89ddff>-></span><span style=color:#82aaff>send</span><span style=color:#89ddff>(</span><span style=color:#eff>200</span><span style=color:#89ddff>)</span><span style=color:#eff>;</span></span>
<span class=line><span style=color:#eff>    });</span></span></code></pre><p>Now, for the API route. This beast of boilerplate is super simple once the crap is removed.</p> <pre class=shiki style=background-color:#212121><code><span class=line><span style=color:#eff>char </span><span style=color:#89ddff>*</span><span style=color:#eff>str = </span><span style=color:#89ddff>(</span><span style=color:#eff>char </span><span style=color:#89ddff>*)</span><span style=color:#eff>data;</span></span>
<span class=line><span style=color:#eff>pixel</span><span style=color:#89ddff>.</span><span style=color:#82aaff>setPixelColor</span><span style=color:#89ddff>(</span><span style=color:#eff>0, pixel</span><span style=color:#89ddff>.</span><span style=color:#82aaff>gamma32</span><span style=color:#89ddff>(</span><span style=color:#82aaff>atoi</span><span style=color:#89ddff>(</span><span style=color:#eff>str</span><span style=color:#89ddff>)))</span><span style=color:#eff>;</span></span>
<span class=line><span style=color:#eff>pixel</span><span style=color:#89ddff>.</span><span style=color:#82aaff>show</span><span style=color:#89ddff>()</span><span style=color:#eff>;</span></span>

<span class=line><span style=color:#eff>request</span><span style=color:#89ddff>-></span><span style=color:#82aaff>send</span><span style=color:#89ddff>(</span><span style=color:#eff>200</span><span style=color:#89ddff>)</span><span style=color:#eff>;</span></span></code></pre><p>Here, extracted from the distractions, is the code that converts the message sent from the server into changing the pixel color. The <code>data</code> variable points to an array of <code>uint8_t</code> values, i.e. the list of chars from the request body. In our case, since we processed everything out in javascript and sent the data over raw and ready to go, we simply cast a few times to convert the char array into the integer values the pixel library wants.</p> <p>For the more complex, JSON processing is possible using a library called <a href=https://arduinojson.org/ >ArduinoJson</a>, but that is a whole beast in itself.</p> <pre class=shiki style=background-color:#212121><code><span class=line><span style=color:#eff>...</span></span>
<span class=line><span style=color:#eff>    server</span><span style=color:#89ddff>-></span><span style=color:#82aaff>begin</span><span style=color:#89ddff>()</span><span style=color:#eff>;</span></span>
<span class=line><span style=color:#eff>}</span></span></code></pre><p>Last but not least, don't forget to start the server.</p> <pre class=shiki style=background-color:#212121><code><span class=line><span style=color:#ffcb6b>void</span><span style=color:#eff> </span><span style=color:#82aaff>loop</span><span style=color:#89ddff>()</span></span>
<span class=line><span style=color:#89ddff>{</span></span>
<span class=line><span style=color:#eff>}</span></span></code></pre><p>And a blank Loop is required to get Arduino to compile. Nothing needs to happen in the loop since the server runs out of sync (asynchronously).</p> <h1 id=step-3---its-showtime>Step 3 - It's Showtime</h1> <p>That's (hopefully) it! Build and upload the sketch, get the IP address from the Serial monitor, and type that bad boy into your browser of choice! You should (hopefully) now be looking at a fully functional React app hosted on a toaster, woops, I mean ESP32.</p> </div></div></main> <footer class=svelte-1p6y3ca><div class="svelte-1p6y3ca footer-container"><p>Copyright Â©2021 Kenneth Collings</p> <nav class=svelte-1p6y3ca><a href=. class=svelte-1p6y3ca>Home</a> <a href=blog class=svelte-1p6y3ca>Blog</a> <a href=about class=svelte-1p6y3ca>About</a></nav></div></footer> 